import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$url from"url";import*as esm_import$path from"path";import*as esm_import$module from"module";var qya,rya,kya,QQ,sya,nya,VQ,UQ;$APP.PQ=function(a,b){return $APP.gu(a,b)};$APP.jya=function(a){a=$APP.Rd(a);a=$APP.vq.g(function(d){return $APP.pu($APP.Eu(),d)},a);var b=$APP.q($APP.Uq),c=$APP.q($APP.Gq);return $APP.Ju(a,new $APP.k(null,2,[$APP.U,b,$APP.Pm,c],null))};
$APP.lya=function(a,b){return QQ(kya,a,b)};
$APP.SQ=function(a,b){return Promise.resolve($APP.l($APP.q(mya))?null:function(){var c=esm_import$path.resolve($APP.l(a)?a:"script.cljs"),d=$APP.l($APP.gz.h(b))?$APP.yj.j(b,$APP.gz,$APP.EM.h(esm_import$fs.readFileSync($APP.gz.h(b),"utf8"))):function(){var g;a:for(g=c;;){var m=esm_import$fs.existsSync(g);m=$APP.l(m)?esm_import$fs.lstatSync(g).isDirectory():m;if($APP.l(m)){m=esm_import$path.resolve(g,"nbb.edn");if($APP.l(esm_import$fs.existsSync(m))){g=m;break a}m=esm_import$path.dirname(g)}else m=
esm_import$path.dirname(g);if($APP.A.g(m,g)){g=null;break a}g=m}return $APP.l(g)?(m=$APP.EM.h(esm_import$fs.readFileSync(g,"utf8")),$APP.yj.l(b,$APP.gz,m,$APP.C([$APP.CK,esm_import$path.dirname(g)]))):b}(),e=RQ.h?RQ.h(c):RQ.call(null,c),f=$APP.p.h(esm_import$url.pathToFileURL(c));$APP.Nu.require=e;$APP.Bk.G($APP.Mu,$APP.yj,$APP.Wn,e);$APP.Bk.G($APP.Mu,$APP.yj,$APP.Ou,function(g){return esm_import$import_meta_resolve.resolve(g,f)});$APP.Fh($APP.WO,d);return Promise.resolve(function(){var g=$APP.gz.h(d);
if($APP.l(g)){g=nya.h(g);if($APP.l(g)){g=$APP.u(g);for(var m=null,r=0,n=0;;)if(n<r){var w=m.ea(null,n);$APP.vb(esm_import$path.isAbsolute(w))?$APP.Hp(function(){var z=$APP.CK.h(d);return $APP.l(z)?esm_import$path.resolve(z,w):w}()):$APP.Hp(w);n+=1}else if(g=$APP.u(g)){m=g;if($APP.Pe(m))g=$APP.hd(m),n=$APP.id(m),m=g,r=$APP.me(g),g=n;else{var x=$APP.v(m);$APP.vb(esm_import$path.isAbsolute(x))?$APP.Hp(function(){var z=$APP.CK.h(d);return $APP.l(z)?esm_import$path.resolve(z,x):x}()):$APP.Hp(x);g=$APP.y(m);
m=null;r=0}n=0}else break}else $APP.Hp(process.cwd());return shadow_esm_import("./nbb_deps.js")}return $APP.Hp(process.cwd())}()).then(function(){return $APP.Fh(mya,!0)})}())};$APP.oya=function(a){var b=esm_import$path.resolve(a);$APP.Fh($APP.Cwa,b);return $APP.SQ(b,null).then(function(){return $APP.Vu(b)})};$APP.pya=function(a){return $APP.SQ(null,null).then(function(){return $APP.Tu(a)})};$APP.TQ=function(a,b){return $APP.St(a,b)};
qya=function(a,b){b=$APP.PQ(a,$APP.Xl("(keys (ns-map '%s))","%s",b));b=$APP.ek.g(function(c){return["`",$APP.p.h(c)].join("")},b);b=["[",$APP.Ep.g(" ",b),"]"].join("");a=$APP.gu(a,b);return $APP.ps.g(function(c){return $APP.fm($APP.p.h(c),"nbb.internal")},a)};
rya=function(a,b){var c=$APP.Eu();b=$APP.cm.g(b,/\//);$APP.B.j(b,0,null);var d=$APP.B.j(b,1,null),e=$APP.PQ(c,$APP.yk.l($APP.C([$APP.V.h($APP.u($APP.P.l(new $APP.E(null,$APP.Yq,null,1,null),new $APP.E(null,$APP.pf($APP.V.h($APP.u($APP.P.g(new $APP.E(null,UQ,null,1,null),new $APP.E(null,$APP.V.h($APP.u($APP.P.g(new $APP.E(null,$APP.vma,null,1,null),new $APP.E(null,$APP.V.h($APP.u($APP.P.g(new $APP.E(null,$APP.xl,null,1,null),new $APP.E(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,1,
null),$APP.C([new $APP.E(null,$APP.V.h($APP.u($APP.P.l(new $APP.E(null,$APP.pK,null,1,null),new $APP.E(null,$APP.V.h($APP.u($APP.P.g(new $APP.E(null,$APP.Jna,null,1,null),new $APP.E(null,UQ,null,1,null)))),null,1,null),$APP.C([new $APP.E(null,UQ,null,1,null)])))),null,1,null)]))))])));if($APP.l(e)&&(c=$APP.l(d)?function(){var m=$APP.Da(d,"."),r=$APP.cm.g(d,/\./);m=m?r:$APP.Gj(r);return new $APP.J(null,2,5,$APP.K,[[$APP.p.h(a),"/",$APP.u(m)?[$APP.Ep.g(".",m),"."].join(""):null].join(""),$APP.zh.j($APP.Ia,
e,m)],null)}():new $APP.J(null,2,5,$APP.K,[[$APP.p.h(a),"/"].join(""),e],null),$APP.l(c))){var f=$APP.B.j(c,0,null),g=$APP.B.j(c,1,null);c=function(){for(var m=g,r=$APP.Xh;;)if($APP.l(m)){var n=Object.getPrototypeOf(m);r=$APP.Ji.g(r,Object.getOwnPropertyNames(m));m=n}else return r}();return $APP.ek.g(function(m){return new $APP.J(null,2,5,$APP.K,[null,[$APP.p.h(f),$APP.p.h(m)].join("")],null)},c)}return null};
$APP.tya=function(a){var b=$APP.bh(a);a=$APP.D.g(b,$APP.U);try{var c=$APP.Eu(),d=$APP.l(a)?$APP.TQ(c,$APP.ok.h(a)):null,e=$APP.$g([$APP.Uq,$APP.l(d)?d:$APP.q($APP.Uq)]);$APP.eq(e);try{var f=function(){var ja=$APP.wn.h(b);return $APP.l(ja)?ja:$APP.CG.h(b)}();if($APP.l(f)){var g=-1!=f.indexOf("/"),m=g?function(){var ja=$APP.cm.g(f,/\//);ja=null==ja?null:$APP.v(ja);return null==ja?null:$APP.ok.h(ja)}():null,r=qya(c,$APP.gu(c,"(ns-name *ns*)")),n=$APP.ek.g(function(ja){return new $APP.J(null,3,5,$APP.K,
[$APP.Dg(ja),$APP.Hj(ja),sya],null)},r),w=$APP.gu(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),x=$APP.Ij($APP.wj(w),$APP.uj(w)),z=$APP.go.h($APP.Sh.l(function(ja){var oa=$APP.D.g(w,ja);ja=$APP.PQ(c,$APP.Xl("(keys (ns-publics '%s))","%s",oa));return $APP.ek.g(function(ma){return new $APP.J(null,3,5,$APP.K,[$APP.p.h(oa),$APP.p.h(ma),VQ],null)},ja)},$APP.C([$APP.uj(w)]))),F=$APP.ek.g(function(ja){return new $APP.J(null,3,5,$APP.K,[$APP.p.h(ja),null,VQ],null)},$APP.gu(c,"(all-ns)")),
M=g?rya(m,f):null,T=$APP.l(M)?null:g?function(){var ja=$APP.D.j(w,m,m),oa=$APP.PQ(c,$APP.Xl("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",ja));return $APP.ek.g(function(ma){return new $APP.J(null,3,5,$APP.K,[$APP.p.h(ja),$APP.p.h(ma),VQ],null)},oa)}():null,X=$APP.P.l(n,z,$APP.C([F,T])),aa=$APP.wq.g(function(ja){var oa=$APP.B.j(ja,0,null);var ma=$APP.B.j(ja,1,null);ja=$APP.B.j(ja,2,null);ja=$APP.A.g(sya,
ja)&&-1!=ma.indexOf(f)?new $APP.J(null,2,5,$APP.K,[oa,ma],null):null;$APP.l(ja)?oa=ja:$APP.l(oa)?(ja=[$APP.p.h($APP.D.g(x,$APP.ok.h(oa))),"/",$APP.p.h(ma)].join(""),ja=-1!=ja.indexOf(f)?new $APP.J(null,2,5,$APP.K,[oa,ja],null):null,$APP.l(ja)?oa=ja:(ma=[$APP.p.h(oa),"/",$APP.p.h(ma)].join(""),oa=-1!=ma.indexOf(f)?new $APP.J(null,2,5,$APP.K,[oa,ma],null):null)):oa=null;return oa},X),ba=$APP.P.g(aa,M),ca=$APP.pf($APP.uw.h($APP.ek.g(function(ja){var oa=$APP.B.j(ja,0,null);ja=$APP.B.j(ja,1,null);ja=new $APP.k(null,
1,["candidate",$APP.p.h(ja)],null);return $APP.l(oa)?$APP.yj.j(ja,"ns",$APP.p.h(oa)):ja},ba)));return new $APP.k(null,2,["completions",ca,"status",new $APP.J(null,1,5,$APP.K,["done"],null)],null)}return new $APP.k(null,1,["status",new $APP.J(null,1,5,$APP.K,["done"],null)],null)}finally{$APP.gq()}}catch(ja){return console.warn(ja),new $APP.k(null,2,["completions",$APP.Xh,"status",new $APP.J(null,1,5,$APP.K,["done"],null)],null)}};kya={};
QQ=function QQ(a,b,c){for(;;){if(b instanceof Promise)return b;if(kya===a){if($APP.Ve(b))return $APP.$O(b,b,c,QQ);a=$APP.Qu(b,c)}else{b=Promise;var e=b.resolve;var f=$APP.oJ.h(c);f=$APP.l(f)?f:$APP.uf;c=new $APP.k(null,1,[$APP.U,$APP.U.h(c)],null);c=f.g?f.g(a,c):f.call(null,a,c);return e.call(b,c)}}};$APP.WQ=new $APP.t(null,"socket-repl","socket-repl",-1615225633,null);$APP.XQ=new $APP.t(null,"repl","repl",1605132860,null);sya=new $APP.G(null,"unqualified","unqualified",-98904653);
nya=new $APP.G(null,"paths","paths",-1807389588);VQ=new $APP.G(null,"qualified","qualified",-2065109343);$APP.YQ=new $APP.t(null,"start-server!","start-server!",203437330,null);$APP.ZQ=new $APP.G(null,"port","port",1534937262);UQ=new $APP.t(null,"resolved__33486__auto__","resolved__33486__auto__",-1654577427,null);$APP.$Q=new $APP.G(null,"classpath","classpath",299521985);$APP.uya=new $APP.G(null,"host","host",-1558485167);var RQ=function(){var a=esm_import$module.createRequire;return $APP.l(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}(),mya=$APP.Ak.h(!1);export let loadFile=$APP.oya;export let loadString=$APP.pya;export let getClassPath=function(){return $APP.Gp()};export let addClassPath=function(a){return $APP.Hp(a)};export let version=function(){return $APP.dv()};export let registerModule=function(a,b){b=$APP.Ria($APP.Gl(b));return $APP.Bk.G($APP.Lu,$APP.yj,b,a)};export let printErrorReport=$APP.aP;