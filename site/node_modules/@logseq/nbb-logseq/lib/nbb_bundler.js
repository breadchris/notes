import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";
var ZJa=function(a){if(a instanceof $APP.t)return new $APP.k(null,1,[$APP.U,a],null);if($APP.We(a)){a=$APP.A.g($APP.xl,$APP.v(a))?$APP.re(a):a;var b=$APP.u(a);a=$APP.v(b);b=$APP.y(b);a=new $APP.k(null,1,[$APP.U,a],null);for(b=$APP.u(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.G?c.S:null){case "as":a=$APP.yj.j(a,$APP.Bq,$APP.re(b));b=$APP.we(b);continue;case "refer":c=$APP.re(b);$APP.We(c)?(a=$APP.yj.j(a,$APP.Wr,$APP.re(b)),b=$APP.we(b)):b=$APP.we(b);continue;default:b=$APP.we(b)}}else return a}else return null},
$Ja=function(a){var b=$APP.bh(a);a=$APP.D.g(b,$APP.U);b=$APP.D.g(b,$APP.Bq);return new $APP.J(null,3,5,$APP.K,[a,$APP.Bq,b],null)},aKa=function(a){return $APP.wq.g(function(b){if($APP.We(b)){var c=$APP.v(b);return $APP.A.g($APP.Wn,c)?(b=$APP.wq.g(ZJa,$APP.Rd(b)),b=$APP.ek.g($Ja,b),$APP.tt.g($APP.Wn,b)):null}return b},a)},bKa=function(a){return $APP.wq.g(function(b){return $APP.Ve(b)&&$APP.A.g($APP.xl,$APP.v(b))?$APP.re(b):null},a)},cKa=function(a){a=bKa($APP.Rd(a));a=$APP.ek.g(ZJa,a);return $APP.tt.g($APP.hE,
$APP.ek.g(function(b){return new $APP.E(null,$APP.xl,new $APP.E(null,$Ja(b),null,1,null),2,null)},a))},dKa=function(a){a=bKa($APP.Rd(a));a=$APP.ek.g(function(b){return new $APP.E(null,$APP.xl,new $APP.E(null,b,null,1,null),2,null)},a);return $APP.u(a)?$APP.tt.g($APP.uM,a):null},oY=function(a){var b=$APP.q($APP.Gq);return[$APP.l(b)?[$APP.p.h(b),":"].join(""):null,$APP.p.h($APP.rm(a)),":",$APP.p.h($APP.sm(a))].join("")},eKa=function(a){var b=$APP.bh(a);a=$APP.D.g(b,$APP.ms);b=$APP.D.g(b,pY);a=$APP.yj.j(a,
$APP.is,!0);var c=$APP.$g([$APP.Uq,$APP.q($APP.Uq),$APP.Gq,$APP.q($APP.Gq),$APP.qN,$APP.uf]);$APP.eq(c);try{var d=$APP.u(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ea(null,e),g=$APP.Dp(f);;){try{var m=$APP.ou(a,g)}catch(ca){console.log($APP.gl(ca)),m=console.error("[babashka]","Ignoring read error while assembling uberscript near",oY(g))}if($APP.A.g($APP.nu,m))break;else if($APP.Ve(m)){var r=$APP.v(m),n=$APP.A.g($APP.ql,r)?aKa(m):$APP.A.g($APP.hE,r)?cKa(m):$APP.A.g($APP.uM,r)?dKa(m):null;if($APP.l(n))try{$APP.pu(a,
n)}catch(ca){console.log(ca),console.error("[babashka]","Ignoring read error while assembling uberscript near",oY(g))}}}e+=1}else{var w=$APP.u(d);if(w){var x=w;if($APP.Pe(x)){var z=$APP.hd(x),F=$APP.id(x);x=z;var M=$APP.me(z);d=F;b=x;c=M}else{f=$APP.v(x);for(var T=$APP.Dp(f);;){try{var X=$APP.ou(a,T)}catch(ca){console.log($APP.gl(ca)),X=console.error("[babashka]","Ignoring read error while assembling uberscript near",oY(T))}if($APP.A.g($APP.nu,X))break;else if($APP.Ve(X)){var aa=$APP.v(X),ba=$APP.A.g($APP.ql,
aa)?aKa(X):$APP.A.g($APP.hE,aa)?cKa(X):$APP.A.g($APP.uM,aa)?dKa(X):null;if($APP.l(ba))try{$APP.pu(a,ba)}catch(ca){console.log(ca),console.error("[babashka]","Ignoring read error while assembling uberscript near",oY(T))}}}d=$APP.y(x);b=null;c=0}e=0}else break}}finally{$APP.gq()}},pY=new $APP.G(null,"expressions","expressions",255689909);(function(){function a(tb){return $APP.Bk.g(n,function(sb){return[$APP.p.h(sb),$APP.xj.g("",sb)?"\n":null,$APP.p.h(tb)].join("")})}var b=$APP.q($APP.WO);b=$APP.bh(b);b=$APP.D.g(b,$APP.HI);var c=$APP.bh(b);b=$APP.D.g(c,$APP.ns);var d=$APP.D.g(c,$APP.aE),e=$APP.D.g(c,$APP.Zn);c=$APP.rA.h(b);var f=function(){var tb=$APP.v(d);return $APP.l(tb)?tb:$APP.v(e)}(),g=$APP.Ak.h($APP.Qd),m=$APP.Ak.h($APP.Xh),r=$APP.Ak.h($APP.Qd),n=$APP.Ak.h(""),w=$APP.Eu(),x=$APP.gu(w,"(set (map ns-name (all-ns)))");w=$APP.yia(w,
new $APP.k(null,1,[$APP.ks,function(tb){tb=$APP.bh(tb);var sb=$APP.D.g(tb,$APP.ls);tb=$APP.D.g(tb,$APP.ms);var Vb=$APP.D.g($APP.wwa,sb);"string"===typeof sb?$APP.Bk.j(g,$APP.vg,$APP.v($APP.cm.j(sb,/\$/,2))):$APP.A.g($APP.oG,sb)?($APP.Bk.j(m,$APP.vg,"./nbb_reagent.js"),$APP.Bk.j(g,$APP.vg,"react")):$APP.A.g($APP.LK,sb)?$APP.Bk.j(m,$APP.vg,"./nbb_reagent.js"):$APP.A.g($APP.WD,sb)?($APP.Bk.j(m,$APP.vg,"./nbb_reagent_dom_server.js"),$APP.Bk.G(g,$APP.vg,"react","react-dom/server")):$APP.l(Vb)?$APP.Bk.j(m,
$APP.vg,Vb):sb instanceof $APP.t&&!$APP.cf(x,sb)&&(sb=$APP.Xl($APP.Xl($APP.p.h(sb),".","/"),"-","_"),sb=$APP.Sia(sb),sb=esm_import$fs.readFileSync(sb,"utf-8"),$APP.Bk.j(r,$APP.vg,sb),eKa(new $APP.k(null,2,[$APP.ms,tb,pY,new $APP.J(null,1,5,$APP.K,[sb],null)],null)));return $APP.ah}],null));if($APP.l(c))return $APP.Gw.l($APP.C(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.eP;$APP.eP=!0;try{var z=esm_import$fs.readFileSync(f,"utf-8");$APP.Bk.j(r,$APP.vg,z);eKa(new $APP.k(null,2,[$APP.ms,w,pY,new $APP.J(null,1,5,$APP.K,[z],null)],null));a($APP.$U("import { loadFile, loadString, registerModule } from '%s'","nbb"));var F=$APP.u($APP.uw.h($APP.q(g)));z=null;for(w=f=0;;)if(w<f){var M=z.ea(null,w),T=$APP.Gl(M),X=$APP.Xl($APP.p.h(T),".","_dot_");a($APP.$U("import * as %s from '%s'",X,M));a($APP.$U("registerModule(%s, '%s')",X,M));w+=1}else{var aa=$APP.u(F);if(aa){var ba=
aa;if($APP.Pe(ba)){var ca=$APP.hd(ba),ja=$APP.id(ba);ba=ca;var oa=$APP.me(ca);F=ja;z=ba;f=oa}else{var ma=$APP.v(ba),O=$APP.Gl(ma),I=$APP.Xl($APP.p.h(O),".","_dot_");a($APP.$U("import * as %s from '%s'",I,ma));a($APP.$U("registerModule(%s, '%s')",I,ma));F=$APP.y(ba);z=null;f=0}w=0}else break}var la=$APP.u($APP.uw.h($APP.q(m)));F=null;for(T=M=0;;)if(T<M){var S=F.ea(null,T);a($APP.$U("import '%s/lib/%s'","nbb",S));T+=1}else{var W=$APP.u(la);if(W){X=W;if($APP.Pe(X)){var ia=$APP.hd(X),na=$APP.id(X);X=
ia;var pa=$APP.me(ia);la=na;F=X;M=pa}else{var wa=$APP.v(X);a($APP.$U("import '%s/lib/%s'","nbb",wa));la=$APP.y(X);F=null;M=0}T=0}else break}var za=$APP.u($APP.uw.h($APP.q(r)));la=null;for(W=S=0;;)if(W<S){var Ea=la.ea(null,W);a($APP.$U("await loadString(%s)",$APP.yk.l($APP.C([Ea]))));W+=1}else{var La=$APP.u(za);if(La){ia=La;if($APP.Pe(ia)){var Za=$APP.hd(ia),cb=$APP.id(ia);ia=Za;var $a=$APP.me(Za);za=cb;la=ia;S=$a}else{var Xa=$APP.v(ia);a($APP.$U("await loadString(%s)",$APP.yk.l($APP.C([Xa]))));za=
$APP.y(ia);la=null;S=0}W=0}else break}var lb=$APP.Wqa.h(b);return $APP.l(lb)?esm_import$fs.writeFileSync(lb,$APP.q(n),"utf-8"):$APP.Gw.l($APP.C([$APP.q(n)]))}finally{$APP.eP=c}})();